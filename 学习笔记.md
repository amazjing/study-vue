# VUE学习

# 1. 简介

**视频学习地址**：https://www.bilibili.com/video/BV1Zy4y1K7SH?p=1



### 1.1 Vue简介

开发者：中国人：尤雨溪。

是一套用于构建用户界面的**渐进式框架**

Vue被设计成为可以自底向上逐层应用。

**MVVM**响应式编程思想模型。



MVVM：页面输入改变数据，数据改变影响页面数据展示与渲染。

- M(model)：普通的javascript数据对象
- v(view)：前端展示页面
- VM(ViewModel)：用于双向绑定数据与页面。

**双向绑定**就是前端数据改变，data中的数据也会改变。data数据改变了，那么前端页面的数据也同样发生改变，这个过程不需要刷新的。

**MVVM的核心**是ViewModel层，负责转换Model中的数据对象来让数据变得更容易管理和使用。

**渐进式框架**：

就是用你想用或者能用的功能特性，你不想用的部分功能可以不用。VUE不强求你一次性接受保存并使用它的全部功能特性。

场景：公司开始开发一个项目，技术人员对Vue的掌握也不足够。那么我们就不能使用VUE了吗？当然不是。如果你只是使用VUE做些基础操作，如：页面渲染、表单处理提交功能，那还是非常简单的，成熟技术人员也就一两天。完全可以用它去代替jquery。并不需要你去引入其他复杂特性功能。

### 1.2 Vue特点

1. 采用**组件化**模式，提高代码复用率、且让代码更好维护。

   ![image-20211103162406062](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103162406062.png)

   推荐活动的功能就是一个文件。Activity.vue里面包含HTML、CSS、JS。如果以后想要使用这个推荐活动的样式就把这个Activity.vue直接引用即可。一个.vue文件就是一个组件。

2. **声明式**编码，让编码人员无需直接操作DOM，提高开发效率。

   比如：

   ![image-20211103162808041](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103162808041.png)

   想把人员List数据展示到页面。JS写法就是

   ![image-20211103162911884](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103162911884.png)

   这种称为命令式编码。

   **声明式**编码：`v-for`是Vue的指令。**p in persons**的含义：persons是数据源，p是数据源里面的每一个数据。

   ![image-20211103163051944](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103163051944.png)

3. 使用**虚拟DOM**+优秀的**Diff算法**，尽量复用DOM节点。

   ![image-20211103163736341](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103163736341.png)

   ![image-20211103163938390](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103163938390.png)

   从3条数据变成4条数据。JavaScript每次都进行遍历之后展示数据。Vue则是将3条与新改变成4条的数据进行比对，如果存在相同的数据，则原来的虚拟DOM的数据则直接复用，将没有的数据，再放进去。

   ![image-20211103164222554](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103164222554.png)

   

   ### 1.3 安装 Vue Devtools

   打开https://devtools.vuejs.org/guide/installation.html网址(下载需要翻墙)
   
   ![image-20211103195208371](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211103195208371.png)
   
   
   
   
   
   ### 1.4 关闭生产提示
   
   ```vue
   <script type="text/javascript">
       Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示
   </script>
   ```
   
   
   
   

## 2. 环境搭建与创建项目

### 2.1 环境搭建

#### 2.1.1 开发软件

- **软件**：Visual Studio Code
- Node.js
- vue.js
- vue.min.js

**安装插件**：(是否安装看个人喜好)

- Bracket Pair Colorizer(彩虹屁，更好的查看括号)
- open in browser(直接打开网页，右键选择open in Default  browser，浏览器显示的地址是页面在电脑上的路径地址)
- Live Server(打开网页，浏览器显示的地址是ip+端口)

### 2.2 创建项目

在桌面新建文件夹**study_vue**，打开vscode软件，将study_vue文件拖入软件即可打开。创建文件夹**01_初识Vue**，并新建**初识Vue.html**，创建js文件夹，将vue.js和vue.min.js放在js文件夹内。

```vue
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <script type="text/javascript">
    	Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示
    </script>
</body>
</html>
```

使用右键，选择**Open with live server**，

![image-20211104085141645](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104085141645.png)

在浏览器上打开页面。打开F12，页面中有两处报错

![image-20211104085443094](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104085443094.png)

**解决报错问题：**

1. 第1处的错误是没有安装**Vue Devtools**
2. 第2处的错误， Vue 在启动时生成生产提示。使用代码可以解决。初识Vue.html代码中21行，已解决。

#### 2.2.1 Hello 小案例

```vue
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备一个容器 -->
    <div id="root">
        <h1>Hello,Vue</h1>
    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示
    </script>

</body>
</html>
```



使用右键，选择**Open with live server**，打开页面。F12，页面有一处错误，（如果没有按住Shift+F5强制刷新）

![image-20211104093916198](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104093916198.png)

这个错误的原因是因为使用插件打开页面报错的。因为，启动项目时，插件就在5500的端口开了一台小服务器。把整个功能的所有的文件和文件夹，都作为这台服务器的根资源去使用。**根资源**就是直接在5500上的资源。打开127.0.0.1:5500，页面显示的就是所有资源。所有资源没有没有这个**favicon.ico**文件所以报错。

![image-20211104093029894](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104093029894.png)

![image-20211104092916499](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104092916499.png)

解决方法，直接在项目的根目录放一个名为favicon.ico图片即可解决错误。

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1launch.json
 * @Author: Wang WenZhe
 * @Date: 2021-11-03 17:18:54
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-04 10:54:22
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备一个容器 -->
    <div id="root">
        <h1>Hello,{{name}}</h1>
        <h1>年龄,{{age}}</h1>
    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示

        //创建Vue实例 ({配置对象})
        //如果div写的是id='root'，则用el:'#root'找。
        //如果是'class=root',用el:'.root'。
        //el：elment(元素)
        new Vue({
            el:'#root', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。
            data:{//data中用于存储数据，数据供el所指定的容器去使用。值在这里是对象(只是暂时的,以后是其他的类型，->函数)。
                name:'台湾省',
                age:3
            }
        })
        
    </script>

</body>
</html>
```



**如果div写的是id='root'，则用el:'#root'找。**

**如果是'class=root',用el:'.root'。**

**总结**：

1. 想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；

2. root容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法；

3. root容器里面的代码被称为**Vue模版**

4. Vue实例和容器是一一对应的；

5. 真实开发中只有一个Vue实例，并且会配合着组件一起使用；

6. {{xxxx}}中的xxxx要写js表达式，且xxxx可以自动读取到data中的所有属性；

7. 一旦data中的数据发生改变，那么模版中用到该数据的地方也会自动更新；

   

   **注意区分**：js表达式和js代码(语句)

   1. **表达式**：一个表达式会产生一个值，可以放在任何一个需要值的地方；
      - 变量:a
      - 加法运算表达式：a+b
      - 函数调用表达式：demo(1)
      - 三元表达式： x === y ? 'a' : 'b'
   2. **js代码(语句)**
      - 判断语句：if(){}
      - 循环语句：for(){}

   

**Vue模版**：

解析流程：先有的容器，然后有的Vue实例，当Vue实例开始工作的时候，发现el数据，需要整个容器拿过来，拿过来之后需要解析，扫描Vue语法。有的话，把data里面的name和age值，全部把容器里的{{name}}和{{age}}替换掉。然后生成一个全新的div，id=‘root‘的容器，然后把解析完的数据重新放在页面上，替换掉刚才的整个容器。



#### 2.2.2 分析Hello小案例

1. **如果将代码改为多个div，容器变为了两个。但是一个vue实例，只会找到第一个div**

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1launch.json
 * @Author: Wang WenZhe
 * @Date: 2021-11-03 17:18:54
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-04 10:56:52
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备一个容器 -->
    <div class="root">
        <h1>Hello,{{name}} 1</h1>
        <h1>年龄,{{age}}</h1>
    </div>
    <div class="root">
        <h1>Hello,{{name}} 2</h1>
        <h1>年龄,{{age}}</h1>
    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示

        //创建Vue实例 ({配置对象})
        //如果div写的是id='root'，则用el:'#root'找。
        //如果是'class=root',用el:'.root'。
        //el：elment(元素)
        new Vue({
            el:'.root', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。
            data:{//data中用于存储数据，数据供el所指定的容器去使用。值在这里是对象(只是暂时的,以后是其他的类型，->函数)。
                name:'台湾省',
                age:3
            }
        })
        
    </script>

</body>
</html>

```

页面只正常显示第1个div的值

![image-20211104105903109](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104105903109.png)

2. 将代码再改为一个容器，两个vue实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1launch.json
 * @Author: Wang WenZhe
 * @Date: 2021-11-03 17:18:54
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-04 11:01:56
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备一个容器 -->
    <div id="root">
        <h1>Hello,{{name}},{{dress}}</h1>
        <h1>年龄,{{age}}</h1>
    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false //阻止 Vue 在启动时生成生产提示

        //创建Vue实例 ({配置对象})
        //如果div写的是id='root'，则用el:'#root'找。
        //如果是'class=root',用el:'.root'。
        //el：elment(元素)
        new Vue({
            el:'#root', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。
            data:{//data中用于存储数据，数据供el所指定的容器去使用。值在这里是对象(只是暂时的,以后是其他的类型，->函数)。
                name:'台湾省',
                age:3
            }
        })
        new Vue({
            el:'#root', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。
            data:{//data中用于存储数据，数据供el所指定的容器去使用。值在这里是对象(只是暂时的,以后是其他的类型，->函数)。
                dress:'中国台湾省'
            }
        })
        
    </script>

</body>
</html>

```

页面显示为

![image-20211104110448436](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211104110448436.png)



**分析**：第1个vue实例接管了div id='root'的容器，第2个vue实例也去接管了div id='root'的容器，由于第1个vue实例已经接管了root容器,第2个vue实例虽然执行了，但是没有任何作用。**一个容器只能被vue实例去接管**

==**容器与vue实例的关系只能是一对一**==

3. **{{}}里面能放什么值？**

   {{}}里面只能放**JS的表达式**

   

## 3. 模板语法

### 3.1 标签体内容

**标签体内容**：是指起始的标签和结束的标签中间夹着的内容就是标签体内容。例如：

```vue
<h1>这就是标签体内容</h1>
<a>这也是标签体内容</a>
```



### 3.2 标签属性

**标签属性**：标签属性就是起始标签内部的一些属性。例如：

```vue
//href就是标签属性，x也是标签属性
<a v-bind:href="url" x="hello"></a>
```



### 3.3 代码实例

```vue
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-04 13:58:07
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-04 14:52:20
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模板语法</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备好一个容器 -->
    <div id="root">
        <h1>插值语法</h1>
        <h3>你好,{{name}}</h3>
        <hr/>
        <h1>指令语法</h1>
        <a :href="url">点我去【{{name}}】</a>
        <a v-bind:href="school.url">点我去【{{school.name}}】</a>
        </div>
    </div>
    
</body>
<script type="text/javascript">
    Vue.config.productionTip = false //阻止vue在启动时生成生产提示。

    new Vue({
        el:'#root',
        data:{
            name:"百度",
            url:"https://www.baidu.com/",
            school:{
                name:'哔哩哔哩 (゜-゜)つロ 干杯~-bilibili',
                url:'https://www.bilibili.com/',
            }
        }
    })
</script>
</html>
```



### 3.4 总结

**总结**：

Vue模版语法有两大类：

1. 插值语法：
   - 功能：用于解析标签体内容。
   - 写法：{{xxx}}，xxx是js表达式，且可以直接读取到data中的所有属性。
2. 指令写法：
   - 功能：用于解析标签体(包含：标签属性、标签体内容、绑定事件......)。
   - 举例：v-bind:href="xxx"   或  简写为   :href=”xxx“，xxx同样要写js表达式，且可以直接读取到data中所有属性。
   - 备注：Vue中有很多指令，且形式都是： v-???，此处只是那v-bind举个例子。



## 4. 数据绑定

### 4.1 代码实例

```vue
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-04 19:25:04
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-04 19:51:59
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据绑定</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <div id="root">
        <h1>普通写法</h1>
        <!-- 普通写法 -->
        单向数据绑定：<input type="text" v-bind:value="name"><br/>
        双向数据绑定：<input type="text" v-model:value="name">
        <hr/>
        <!-- 简写 -->
        <h1>简写</h1>
        单向数据绑定：<input type="text" :value="name"><br/>
        双向数据绑定：<input type="text" v-model="name">

        <!-- 如下代码是错误的，因为v-model只能应用在表单类元素（输入类元素）上 -->
        <h2 v-model:x='name'>你好啊</h2>
    </div>
    
</body>
<script type="text/javascript">
    Vue.config.productionTip = false //阻止vue在启动时产生生产提示。

    new Vue({
        el:'#root',
        data:{
            name:'尚硅谷'
        }
    })
</script>
</html>
```



### 4.2 总结

**总结**：

Vue中有2种数据绑定的方式：

1. 单向绑定(v-bind)：数据只能从data流向页面。

2. 双向绑定(v-model)：数据不能能从data流向页面，还可以从页面流向data。

   **备注**：

   1. 双向绑定一般都应用在表单类元素上(如：input、select等)
   2. v-model：value 可以简写为 v-model，因为v-model默认收集的是value值。



## 5. el与data的两种写法

### 5.1 代码实例

```vue
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-05 08:21:41
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-05 08:54:03
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>el与data的两种写法</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备好一个容器 -->
    <div id="root">
      <h1>你好,{{name}}</h1>
    </div>
  </body>

  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止 Vue 在启动时生成生产提示

    //el的两种写法
    /*const v = new Vue({
      //el: "#root",    //第一种写法
      data: {
        name: "哔哩哔哩 (゜-゜)つロ 干杯~-bilibili",
      },
    });
    console.log(v);

    v.$mount("#root"); //第二种写法
  */

    //定时器。每1秒钟执行一次
    // setTimeout(() => {
    //   v.$mount("#root");
    // }, 1000);

    //data的两种写法
    new Vue({
      el: "#root",
      //data的第一种写法：对象式
      /* data: {
         name: "哔哩哔哩 (゜-゜)つロ 干杯~-bilibili",
       },
      */

      //data的第二种写法：函数式
      data: function () {
        console.log("@@@", this); //此处的this是Vue实例对象
        return {
          name: "哔哩哔哩 (゜-゜)つロ 干杯~-bilibili",
        };
      },
    });
  </script>
</html>

```



### 5.2 总结

**总结**：

data与el的2种写法：

1. el有两种写法

   1. new Vue时候配置el属性。
   2. 先创建Vue实例，随后再通过vm.$mount('#root')指定el的值。

2. data有2种写法

   1. 对象式

   2. 函数式

      如何选择：目前那种写法都可以，以后的学习组件时，data必须使用函数式，否则会报错。

   3. 一个重要原则：

      由Vue管理的函数，一定不要写箭头函数，一旦写了箭头函数，this就不再是Vue实例了。



## 6. MVVM模型

### 6.1 初识MVVM

1. **M**：模型(Model)：对应data中的数据

2. **V**：视图(View)：模版

3. **VM**：视图模型(ViewModel)：Vue实例对象

   ![image-20211105102943781](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211105102943781.png)



### 6.2 代码实例

```vu
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-05 10:33:11
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-05 10:52:39
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>理解MVVM</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!-- 准备好一个容器 -->
    
    <!-- 下面整个id="root"的div就是一个View -->
    <div id="root">
        <h1>学校名称：{{name}}</h1>
        <h1>学校地址：{{address}}</h1>
        <!-- <h1>测试一下1：{{1+1}}</h1>
        <h1>测试一下2：{{$options}}</h1>
        <h1>测试一下3：{{$emit}}</h1>
        <h1>测试一下4：{{_c}}</h1> -->
        </div>
    </div>
    
</body>
<script type="text/javascript">
    Vue.config.productionTip = false //阻止vue在启动时生成生产提示。

    const vm = new Vue({//就是ViewModel视图模型
        el:'#root',
        data:{
            //name、addres就是Model
            name:"哔哩哔哩 (゜-゜)つロ 干杯~-bilibili",
            address:"北京",
        }
    })
    console.log(vm);
</script>

</html>
```



### 6.3 总结

**总结**：

**MVVM模型**：

1. M：模型(Model)：data中的数据
2. V：视图(View)：模版代码
3. VM：视图模型(ViewModel)：Vue实例

**观察发现**：

1. data中所有的属性，最后都出现在了vm身上。
2. vm身上所有的属性 及 Vue原型上所有属性，在Vue模版中都可以直接使用。



## 7. 数据代理

### 7.1 Object.defineProperty方法

#### 7.1.1 代码实例

```vue
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-05 15:28:32
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-05 16:06:22
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>回顾Object.defineproperty方法</title>
  </head>
  <body>
    <script type="text/javascript">
      let number = 18;
      let person = {
        name: "张三",
        sex: "男",
      };

      Object.defineProperty(person, "age", {
        // value: 18,
        // enumerable: true, //控制属性是否可以枚举，默认值是false
        // writable: true, //控制属性是否可以被修改，默认值是false
        // configurable: true, //控制属性是否可以被删除，默认值是false

        //当有人读取person的age属性时，get函数(getter)就会被调用，且返回值就是age的值
        get: function () {
          //可以简写成get(),不需要':'和function
          console.log("有人读取age属性了");
          return number;
        },

        //当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值
        set(value) {
          console.log("有人修改了age属性，且值是，", value);
          number = value;
        },
      });

      //console.log(Object.keys(person));

      //   遍历去person对象的属性值
      /*for (let key in person) {
        console.log("@", person[key]);
      }*/

      console.log(person);
    </script>
  </body>
</html>

```



控制台输出

![image-20211105160528782](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211105160528782.png)



#### 7.1.2 总结

**总结**：

Object.defineProperty方法可以给person对象增加属性，通过get可以给对象person赋予age的属性和值。通过set可以修改age的值



### 7.2 何为数据代理

#### 7.2.1 代码实例

**数据代理**：通过一个对象代理对另一个对象中属性的操作（读/写）

```vue
<!--
 * @Descripttion: Vue学习
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-05 16:18:44
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-05 16:31:09
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>何为数据代理</title>
  </head>
  <body>
    <!-- 数据代理：通过一个对象代理对另一个对象中属性的操作（读/写） -->
    <script type="text/javascript">
      let obj = { x: 100 };
      let obj2 = { y: 200 };

      //通过obj2读到x，还能修改x值
      Object.defineProperty(obj2, "x", {
        //给obj2追加一个x属性
        get() {
          //把obj的x值返回给ojb2
          return obj.x;
        },
        set(value) {
          //想修改obj2的x值，就把obj的x值修改了
          obj.x = value;
        },
      });
    </script>
  </body>
</html>

```



### 7.3 Vue中的数据代理

#### 7.3.1 代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-08 10:30:42
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-08 11:32:10
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue中的数据代理</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备好一个容器 -->
    <div id="root">
      <h2>公司名称:{{name}}</h2>
      <h2>公司地址:{{address}}</h2>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示。

    const vm = new Vue({
      el: "#root",
      //浏览器控制台中的vm包含name，address数据，vm.name就能获取到“尚硅谷值”。
      //vm中的“_data”数据是data数据，但是做了数据劫持，需要分析数据才能得到
      //vm._data === data
      data: {
        name: "尚硅谷",
        address: "宏福科技园",
      },
    });
  </script>
</html>

```



#### 7.3.2 数据代理过程

打开控制台，查看在控制台中修改name的值，页面数据就会变成修改的数据。但是修改的过程是什么怎样的。是如何进行修改的。

![image-20211108111355642](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211108111355642.png)



#### 7.3.3 数据代理图示

![image-20211108140852316](https://gitee.com/Amazjing/markdown-img/raw/master/img/image-20211108140852316.png)



#### 7.3.4 总结

**总结**：

1. Vue中的数据代理：
   - 通过vm对象来代理data对象中属性的操作(读/写)
2. Vue中数据代理的好处：
   - 更加方便的操作data中的数据
3. 基本原理：
   - 通过Object.defineProperty()把data对象中所有属性添加到vm上。
   - 为每一个添加到vm上的属性，都指定一个getter/setter。
   - 在getter/setter内部去操作(读/写)data中对应的属性。





## 8. 事件处理

### 8.1 事件的基本使用

#### 8.1.1 代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-08 14:25:50
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-08 14:59:02
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>事件的基本使用</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备好一个容器 -->
    <div id="root">
      <h2>欢迎来到{{name}}</h2>
      <!-- 普通写法 -->
      <!-- <button v-on:click="showInfo">点我提示信息</button> -->
      <!-- 简单写法(不传参数) -->
      <button @click="showInfo1">点我提示信息1</button>
      <!-- 简单写法(传参数77，并传event) -->
      <button @click="showInfo2(77,$event)">点我提示信息2</button>
    </div>
  </body>

  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示。

    const vm = new Vue({
      el: "#root",
      data: {
        name: "哔哩哔哩 (゜-゜)つロ 干杯~-bilibili",
      },
      methods: {
        showInfo1(event) {
          //console.log(event.target.innerText); 此方法可以获取到“点我提示信息”数据
          //console.log(this);此处的this就是vm
          alert("同学你好！");
        },
        showInfo2(number, event) {
          console.log(number, event);
          //console.log(event.target.innerText); 此方法可以获取到“点我提示信息”数据
          //console.log(this);此处的this就是vm
          alert("同学你好！！");
        },
      },
    });
  </script>
</html>

```



#### 8.1.2 总结

**总结**：

事件的基本使用：

1. 使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名；
2. 事件的回调需要配置在methods对象中，最终会在vm上；
3. methods中配置的函数，不要用箭头函数！否则this就不是vm了；
4. methods中配置的函数，都是被Vue所管理的函数，this的指向是vm 或 组件实例对象；
5. @click="demo" 和 @click="demo($event)" 效果一致，但后者可以传参；



### 8.2 事件的修饰符

#### 8.2.1 代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-08 15:19:14
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-09 13:28:35
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>事件的修饰符</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <style>
      /* 设置所有元素之间都有20px的间距 */
      * {
        margin-top: 20px;
      }
      /* 设置class=demo1的样式 */
      .demo1 {
        height: 50px;
        background-color: skyblue;
      }
      /* 设置class=box1的样式 */
      .box1 {
        padding: 5px;
        background-color: skyblue;
      }
      /* 设置class=box2的样式 */
      .box2 {
        padding: 5px;
        background-color: orange;
      }
      /* 设置class=list的样式 */
      .list {
        width: 200px;
        height: 200px;
        background-color: peru;
        overflow: auto;
      }
      /* li标签的样式 */
      li {
        height: 100px;
      }
    </style>
  </head>
  <body>
    <!-- 准备好一个容器 -->
    <div id="root">
      <h2>欢迎来到{{name}}学习</h2>

      <!-- 阻止默认事件(常用) -->
      <!-- a标签默认打开网址，方法showInfo虽然没有传参，但是会有event -->
      <a href="https://www.bilibili.com/" @click.prevent="showInfo"
        >点我提示信息</a
      >

      <!-- 阻止事件冒泡(常用) -->
      <div class="demo1" @click="showInfo">
        <button @click.stop="showInfo">点我提示信息</button>
      </div>

      <!-- 事件只触发一次(常用) -->
      <button @click.once="showInfo">点我提示信息</button>

      <!-- 使用事件的捕获模式 -->
      <div class="box1" @click.capture="showMsg(1)">
        div1
        <div class="box2" @click="showMsg(2)">div2</div>
      </div>

      <!-- 只有event.target是当前操作的元素时才触发事件 -->
      <div class="demo1" @click.self="showInfo">
        <button @click="showInfo">点我提示信息</button>
      </div>

      <!-- 事件的默认行为立即执行，无需等待事件回调执行完毕 -->
      <!-- @scroll是给滚动条加的滚动事件,只要滚动就会监听到执行demo方法-->
      <!-- @wheel是给鼠标的滚动轮加的滚动事件,只要滚动就会监听到执行demo方法 -->
      <!-- @wheel.passive会导致页面滚动条立刻向下滑动，且一边执行for循环。不加passive
            会导致，先执行for循环方法，执行完毕后才会滚动。-->
      <ul @wheel.passive="demo" class="list">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
      </ul>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止 vue 在启动时生成生产提示。

    new Vue({
      el: "#root",
      data: {
        name: "Ama",
      },
      methods: {
        showInfo(event) {
          //event.preventDefault()阻止默认行为。也可以在click事件改成@click.prevent;
          //这个prevent就是事件修饰符
          //event.preventDefault();

          //阻止事件冒泡
          //event.stopPropagation();阻止事件冒泡行为。也可以在click事件改成@click.stop;
          //这个stop就是事件修饰符
          //event.stopPropagation();

          alert("同学你好！");
        },
        showMsg(msg) {
          console.log(msg);
        },
        demo() {
          for (let i = 0; i < 100000; i++) {
            console.log("#");
          }
          console.log("累坏了");
        },
      },
    });
  </script>
</html>
```



#### 8.2.2 总结

**总结**：

Vue中的事件修饰符：

1. prevent：阻止默认事件(常用)；
2. stop：阻止事件冒泡(常用)；
3. once：事件只触发一次(常用)；
4. capture：使用事件的捕获模式；
5. self：只有event.target是当前操作的元素时才触发事件；
6. passive：事件的默认行为立即执行，无需等待事件回调执行完毕；



### 8.3 键盘事件

#### 8.3.1 代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-09 13:41:38
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-09 15:18:40
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>键盘事件</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备一个容器 -->
    <div id="root">
      <h2>欢迎来到{{name}}学习</h2>
      <!-- keydown是按下去某个键不用抬起来就会触发
           keyup是按下去某个键松手后触发 -->
      <input
        type="text"
        placeholder="按下回车提示输出"
        @keydown.huiche="showInfo"
      />
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止 vue 在启动时生成生产提示。

    //如果指定按某个键触发，比如按住“ctrl”加“Y”触发，把“Y”换成其它键不管用，则可以写成“@keyup.ctrl.y”

    //定义了一个别名按键,属于自定义的键名，将“huiche”与enter的编码13绑定;
    Vue.config.keyCodes.huiche = 13;

    new Vue({
      el: "#root",
      data: {
        name: "Ama",
      },
      methods: {
        //方法里的参数e，是默认传的，就是event
        showInfo(e) {
          //console.log(e.keyCode);该方法获取键盘编码;回车的编码是13;
          //如果按下的不是回车，那么就会执行return，后面的console就不会执行。只用按下回车键才会执行console.log
          //如果使用的是@keyup.enter。则不需要if判断，就会实现只有按下回车键才会执行输出console.log。
          //   if (e.keyCode !== 13) {
          //     return;
          //   }

          //e.key是获取按键的名称;比如你按Enter，则输出Enter。
          //如果按的是改变字母大小写的按键CapsLock，需要在@keyup.caps.lock;对于字母较长的第一个与第二个字母都需要小写
          //第一个字母与第二个字母之间用“-”;
          //console.log(e.key, e.keyCode);

          console.log(e.target.value); //输出输入框填写的全部值。
        },
      },
    });
  </script>
</html>

```



#### 8.3.2 总结

**总结**：

1. Vue中常用的按键别名：
   - 回车 => enter
   - 删除 => delete （捕获”删除“和”退格“键）
   - 退出 => esc
   - 空格 => space
   - 换行 => tab （特殊，必须配合keydown使用）
   - 上 => up
   - 下 => down
   - 左 => left
   - 右 => right
2. Vue 未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-case（短横线命名）
3. 系统修饰键（用法特殊）：ctrl、alt、shift、meta
   - 配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才触发。
   - 配合keydown使用：正常触发事件。
4. 也可以使用keyCode去指定具体的按键（不推荐）
5. **Vue.config.keyCode.自定义键名** = 键码，可以去定制按键别名



## 9. 计算属性

### 9.1 插值语法实现

代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 09:23:28
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 09:46:39
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>姓名案例+_插值语法实现</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备好有一个容器 -->
    <!-- "全名"实时随着"姓"和"名"页面输入框的值发生变化;
        {{firstName.slice(0,3)}}-{{lastName}} 只获取"姓"输入框里的前三位，"张xx-三"-->
    <div id="root">
      姓：<input type="text" v-model='firstName' /></br> 
      名：<input type="text" v-model='lastName' /></br> 
      全名：<span>{{firstName.slice(0,3)}}-{{lastName}}</span>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成上产提示。

    new Vue({
        el:'#root',
        data: {
            firstName:"张",
            lastName:"三"
        },
    })
  </script>
</html>

```



### 9.2 methods实现

代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 09:23:28
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 09:52:23
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>姓名案例_methods实现</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <body>
    <!-- 准备好有一个容器 -->
    <div id="root">
      姓：<input type="text" v-model='firstName' /></br> 
      名：<input type="text" v-model='lastName' /></br> 
      全名：<span>{{fullName()}}</span>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成上产提示。

    new Vue({
        el:'#root',
        data: {
            firstName:"张",
            lastName:"三"
        },
        methods: {
            fullName(){
                return this.firstName + '-' +this.lastName
            }
        },
    })
  </script>
</html>

```



### 9.3 计算属性实现

代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 09:56:28
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 11:11:32
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>姓名案例_计算属性实现</title>
  <!-- 引入Vue -->
  <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
  <!-- 准备好有一个容器 -->
  <div id="root">
    姓：<input type="text" v-model='firstName' /></br> 
    名：<input type="text" v-model='lastName' /></br> 
    全名：<span>{{fullName}}</span></br> 
  </div>
</body>
<script type="text/javascript">
  Vue.config.productionTip = false; //阻止vue在启动时生成上产提示。

  const vm = new Vue({
      el:'#root',
      data: {
          firstName:"张",
          lastName:"三"
      },
      computed:{//计算属性
          fullName:{
              //get有什么作用？当有人读取fullName时，get就会被调用，且返回值就作为fullName的值
              //get什么时候调用？1.初次读取fullName时。2.所依赖的数据发生变化时。
              get(){
                console.log("get被调用了");
                  //console.log(this);此处的this是vm
                  return this.firstName + '-' + this.lastName
              },
              //set什么时候调用?当fullName被修改时。
              set(value){
                  console.log('set',value)
                  const arr = value.split('-')
                  this.firstName = arr[0]
                  this.lastName = arr[1]
              }
          }
      }
  })
</script>
</html>
```



### 9.4 计算属性简写

代码实例

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 09:56:28
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 13:18:02
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>姓名案例_计算属性简写</title>
  <!-- 引入Vue -->
  <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
  <!-- 准备好有一个容器 -->
  <div id="root">
    姓：<input type="text" v-model='firstName' /></br> 
    名：<input type="text" v-model='lastName' /></br> 
    全名：<span>{{fullName}}</span></br> 
  </div>
</body>
<script type="text/javascript">
  Vue.config.productionTip = false; //阻止vue在启动时生成上产提示。

  const vm = new Vue({
      el:'#root',
      data: {
          firstName:"张",
          lastName:"三"
      },
      computed:{
          //完整写法
          // fullName:{
          //     get(){
          //       console.log("get被调用了");        
          //         return this.firstName + '-' + this.lastName
          //     },
          //     set(value){
          //         console.log('set',value)
          //         const arr = value.split('-')
          //         this.firstName = arr[0]
          //         this.lastName = arr[1]
          //     }
          // }

          //简写
          fullName(){
            console.log("get被调用了");
            return this.firstName + '-' + this.lastName  
          }
        }
  })
</script>
</html>
```



==**注意**==：只使用get方法时才能进行简写。



### 9.5 计算属性总结

**总结**：

1. 定义：要用的属性不存在，要通过已有属性计算得来。
2. 原理：底层借助了Object.defineproperty方法提供的getter和setter。
3. get函数什么时候执行？
   - 初次读取时会执行一次。
   - 当依赖的数据发生改变时会被再次调用。
4. 优势：与methods实现相比，内部有缓存机制（复用），效率更高，调试方便。
5. 备注：
   - 计算属性最终会出现在vm上，直接读取使用即可。
   - 如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变。



## 10. 监视属性

### 10.1 天气案例

**代码实例**

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 15:29:47
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 16:04:32
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>天气案例</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <!-- 实现效果：当在页面点击“切换天气”，页面中的“凉爽”就变成了“炎热”，再点击按钮就重新变成“凉爽”。
                在“凉爽”和“炎热”之间来回切换-->
  <body>
    <div id="root">
      <h2>今天天气很{{info}}</h2>
      <!-- 使用@click="changeWeather"实现切换天气(推荐写法) -->
      <button @click="changeWeather">切换天气</button>

      <!-- 使用语句，实现切换天气;模版里需要的"isHot"，可以在vm里找到。 -->
      <!-- 绑定事件的时候：@xxx='yyy' yyy可以写一些简单的语句-->
      <!-- <button @click="isHot = !isHot">切换天气</button> -->
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示。

    const vm = new Vue({
      el: "#root",
      data: {
        isHot: true,
      },
      computed: {
        //计算属性
        info() {
          //“isHot ? "炎热" : "凉爽"”前面必须加“this”,只有通过vm才能拿到。
          return this.isHot ? "炎热" : "凉爽";
        },
      },
      methods: {
        changeWeather() {
          //当使用@click="changeWeather"时，可以使用changeWeather()的代码。
          this.isHot = !this.isHot;
        },
      },
    });
  </script>
</html>

```



### 10.2 天气案例_监视属性

**代码实例**

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 15:29:47
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-10 16:34:41
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>天气案例_监视属性</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <!-- 实现效果：当在页面点击“切换天气”，页面中的“凉爽”就变成了“炎热”，再点击按钮就重新变成“凉爽”。
                在“凉爽”和“炎热”之间来回切换。
                每次切换都会在console捕获到，显示原来是什么现在是什么 -->
  <body>
    <div id="root">
      <h2>今天天气很{{info}}</h2>
      <button @click="changeWeather">切换天气</button>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示。

    const vm = new Vue({
      el: "#root",
      data: {
        isHot: true,
      },
      computed: {
        //计算属性
        info() {
          //“isHot ? "炎热" : "凉爽"”前面必须加“this”,只有通过vm才能拿到。
          return this.isHot ? "炎热" : "凉爽";
        },
      },
      methods: {
        changeWeather() {
          this.isHot = !this.isHot;
        },
      },
      /*watch: {
        watch监视属性;它的值是一个配置对象

        watch不仅可以监听到data里面的“isHot”，也可以监听到computed里面的“info”

        通过监听data里面的“isHot”实现
        isHot: {
          immediate: true, //默认false;作用：初始化时让handler调用一下
          //handler函数什么时候调用？当isHot发生改变时。
          handler(newValue, oldValue) {
            console.log("isHot被修改了", newValue, oldValue);
          },
        },

        通过监听computed里面的“info”实现
        info: {
          immediate: true, //默认false;作用：初始化时让handler调用一下
          //handler函数什么时候调用？当isHot发生改变时。
          handler(newValue, oldValue) {
            console.log("info被修改了", newValue, oldValue); //newValue是新的值;oldValue是旧的值
          },
        },
      },*/
    });

    vm.$watch("isHot", {
      immediate: true, //默认false;作用：初始化时让handler调用一下
      //handler函数什么时候调用？当isHot发生改变时。
      handler(newValue, oldValue) {
        console.log("isHot被修改了", newValue, oldValue);
      },
    });
  </script>
</html>

```



### 10.3 监视属性总结

**总结**：

监视属性**watch**：

1. 当被监视的属性发生变化时，回调函数自动调用，进行相关操作
2. 监视的属性必须存在，才能进行监视
3. 监视的两种写法：
   - new Vue时传入watch配置
   - 通过vm.$watch监视



### 10.4 深度监视

**代码实例**

```vue
<!--
 * @Descripttion: 学习Vue
 * @version: 0.0.1
 * @Author: Wang WenZhe
 * @Date: 2021-11-10 15:29:47
 * @LastEditors: Wang WenZhe
 * @LastEditTime: 2021-11-11 10:08:34
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>天气案例_深度监视</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <!-- 实现效果：
    1. 点击"点我让a+1" 按钮，a的值自动就加1，并且检测“a”和“b”的值-->
  <body>
    <div id="root">
      <h2>今天天气很{{info}}</h2>
      <button @click="changeWeather">切换天气</button>
      <hr/>
      <h3>a的值是:{{numbers.a}}</h3>
      <button @click="numbers.a++">点我让a+1</button>
      <hr/>
      <h3>b的值是:{{numbers.b}}</h3>
      <button @click="numbers.b++">点我让b+1</button>
    </div>
  </body>
  <script type="text/javascript">
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示。

    const vm = new Vue({
      el: "#root",
      data: {
        isHot: true,//内部值一层
        numbers: {//内部值多层
          a: 1,
          b: 1,
        },
      },
      computed: {
        //计算属性
        info() {
          //“isHot ? "炎热" : "凉爽"”前面必须加“this”,只有通过vm才能拿到。
          return this.isHot ? "炎热" : "凉爽";
        },
      },
      methods: {
        changeWeather() {
          this.isHot = !this.isHot;
        },
      },
      watch: {
        isHot: {
            //直接写isHot是简写方式，一般标准写法写法是在外面加上双引号
            //immediate: true, //默认false;作用：初始化时让handler调用一下
            //handler函数什么时候调用？当isHot发生改变时。
            handler(newValue, oldValue) {
              console.log("isHot被修改了", newValue, oldValue);
          },
        },
        //监视多级结构中某个属性的变化
        // 'numbers.a':{//使用双引号不起作用;
        //   handler(){
        //     console.log('a被改变了');
        //   }
        // }

        //监视多级结构中所有属性的变化
        numbers:{
          deep:true,
          handler(){
            console.log('numbers改变了');
          }
        }
      },
    });
  </script>
</html>

```



**总结**：

深度监视：

1. Vue中的watch默认不监视对象内部的改变（一层）。
2. 配置deep:true可以检测对象内部值改变（多层）。

备注：

1. Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以！
2. 使用watch时根据数据的具体结构，决定是否采用深度监视。



### 10.5 简写监视属性

